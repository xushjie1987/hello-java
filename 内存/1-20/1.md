# 分配一块内存，在一块内存上读写数据

`注意：`

```
1. 来自flink-core制品的org.apache.flink.core.memory包中的类；
2. 避免手动分配byte[]；
3. 能够自动完成对当前位置的管理；
4. 方便完成数据的读写操作；
```

`代码：`

```xml
        <dependency>
            <groupId>org.apache.flink</groupId>
            <artifactId>flink-core</artifactId>
            <version>1.6.2</version>
        </dependency>
```

```java
    public static void main(String[] args) throws Exception {
        MemorySegment ms = MemorySegmentFactory.allocateUnpooledSegment(1024);
        ByteArrayDataInputView badiv = new ByteArrayDataInputView(ms.getArray());
        System.out.println(badiv.available());// 1024
        ByteArrayDataOutputView badov = new ByteArrayDataOutputView(1024);
        badov.writeUTF("hello");
        System.out.println(badov.getPosition());// 7
        System.out.println(new ByteArrayDataInputView(badov.toByteArray()).readUTF());// hello
        System.out.println(new ByteArrayDataInputView(badov.toByteArray()).available());// 7
        System.out.println(new ByteArrayDataInputView(badov.getInternalBufferReference()).readUTF());// hello
        System.out.println(new ByteArrayDataInputView(badov.getInternalBufferReference()).available());// 1024
    }
```



















